<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 2 - Verb Tenses Practice</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .intro {
            text-align: center;
            margin-bottom: 30px;
            color: #7f8c8d;
        }
        
        .exercise {
            margin-bottom: 25px;
            padding: 20px;
            border-radius: 8px;
            background-color: #f9f9f9;
            border-left: 4px solid #3498db;
        }
        
        .sentence {
            font-size: 16px;
            margin-bottom: 15px;
        }
        
        .blank {
            display: inline-block;
            min-width: 150px;
            border-bottom: 2px solid #3498db;
            margin: 0 5px;
            padding: 0 5px;
            color: #e74c3c;
            font-weight: bold;
        }
        
        .answer-input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            width: 150px;
            margin: 0 5px;
        }
        
        .answer-input::placeholder {
            color: #7f8c8d;
            font-style: italic;
            opacity: 0.8;
        }
        
        .buttons {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }
        
        button {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .check-btn {
            background-color: #2ecc71;
            color: white;
        }
        
        .check-btn:hover {
            background-color: #27ae60;
        }
        
        .show-btn {
            background-color: #3498db;
            color: white;
        }
        
        .show-btn:hover {
            background-color: #2980b9;
        }
        
        .reset-btn {
            background-color: #95a5a6;
            color: white;
        }
        
        .reset-btn:hover {
            background-color: #7f8c8d;
        }
        
        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            display: none;
        }
        
        .correct {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .incorrect {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .score-container {
            text-align: center;
            margin: 30px 0;
            padding: 15px;
            background-color: #ecf0f1;
            border-radius: 8px;
        }
        
        .score {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .explanation {
            margin-top: 10px;
            font-style: italic;
            color: #7f8c8d;
            font-size: 14px;
        }
        
        .back-btn {
            display: inline-block;
            margin-bottom: 20px;
            padding: 8px 16px;
            background-color: #95a5a6;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            text-decoration: none;
        }
        
        .back-btn:hover {
            background-color: #7f8c8d;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .answer-input {
                width: 120px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-btn">← Quay lại trang chủ</a>
        
        <h1>Lesson 2 - Verb Tenses Practice</h1>
        <div class="intro">
            <p>Complete the sentences with the correct verb tenses. Type your answers in the input fields and click "Check" to verify.</p>
        </div>
        
        <div class="score-container">
            <div class="score">Score: <span id="score">0</span> / <span id="total">30</span></div>
        </div>
        
        <div id="exercises-container">
            <!-- Exercises will be generated by JavaScript -->
        </div>
        
        <div class="buttons" style="justify-content: center; margin-top: 30px;">
            <button class="check-btn" onclick="checkAllAnswers()">Check All Answers</button>
            <button class="show-btn" onclick="showAllAnswers()">Show All Answers</button>
            <button class="reset-btn" onclick="resetAllAnswers()">Reset All</button>
        </div>
    </div>
    <script>
        // Exercise data with sentences and correct answers
        const exercises = [
            {
                sentence: "In recent years, the government (invest) heavily in renewable energy, and as a result, the number of solar panels (increase) significantly since 2015.",
                blanks: ["has invested", "has increased"],
                explanation: "Present Perfect: actions that started in the past and continue to have relevance in the present."
            },
            {
                sentence: "While I (prepare) for my IELTS exam last month, my brother (visit) from abroad and we (spend) the whole weekend sightseeing.",
                blanks: ["was preparing", "visited", "spent"],
                explanation: "Past Continuous for an action in progress, Past Simple for completed actions."
            },
            {
                sentence: "By next year, scientists predict that artificial intelligence (change) the way we work, and many jobs (become) automated.",
                blanks: ["will change", "will become"],
                explanation: "Future Simple for predictions about the future."
            },
            {
                sentence: "She (live) in this city for over a decade, but lately she (think) about moving because the cost of living (rise) rapidly.",
                blanks: ["has lived", "has been thinking/is thinking", "is rising"],
                explanation: "Present Perfect for duration, Present Continuous for recent temporary trends."
            },
            {
                sentence: "Yesterday at 5 PM, when the storm (hit), people (run) for shelter and cars (stop) on the highway.",
                blanks: ["hit", "were running", "stopped"],
                explanation: "Past Simple for interrupting action, Past Continuous for ongoing action."
            },
            {
                sentence: "The chart shows that online shopping (grow) steadily over the past five years, and experts believe it (continue) to dominate retail in the future.",
                blanks: ["has grown", "will continue"],
                explanation: "Present Perfect for recent trends, Future Simple for predictions."
            },
            {
                sentence: "I (never/visit) Japan, but I (plan) to go there next summer because I (hear) it's a fascinating place for tourists.",
                blanks: ["have never visited", "am planning/am going to plan", "have heard"],
                explanation: "Present Perfect for experiences, Present Continuous for future plans."
            },
            {
                sentence: "Right now, the company (develop) a new app that (help) users learn languages, and they (launch) it by the end of this year.",
                blanks: ["is developing", "will help", "will launch"],
                explanation: "Present Continuous for current actions, Future Simple for future intentions."
            },
            {
                sentence: "Last weekend, while we (hike) in the mountains, it (start) raining heavily, so we (decide) to return home early.",
                blanks: ["were hiking", "started", "decided"],
                explanation: "Past Continuous for background action, Past Simple for completed actions."
            },
            {
                sentence: "Education systems around the world (evolve) quickly, and in the coming decades, online learning (replace) traditional classrooms in many areas.",
                blanks: ["are evolving", "will replace"],
                explanation: "Present Continuous for current trends, Future Simple for predictions."
            },
            {
                sentence: "He (work) as a teacher since he graduated, but recently he (consider) switching careers because teaching methods (change) so much.",
                blanks: ["has worked", "has been considering/is considering", "have changed"],
                explanation: "Present Perfect for duration, Present Perfect Continuous or Present Continuous for recent considerations."
            },
            {
                sentence: "Look at those dark clouds! It (rain) soon, so we (need) to hurry if we (want) to finish our picnic.",
                blanks: ["is going to rain", "will need", "want"],
                explanation: "Be going to for predictions based on evidence, Future Simple for consequences, Present Simple for conditions."
            },
            {
                sentence: "In 2020, the pandemic (force) many businesses to close, and since then, remote work (become) a permanent trend.",
                blanks: ["forced", "has become"],
                explanation: "Past Simple for completed actions, Present Perfect for recent developments."
            },
            {
                sentence: "She (study) English for three years now, and she (improve) a lot, which is why she (take) the IELTS test next month.",
                blanks: ["has studied/has been studying", "has improved", "is going to take/will take"],
                explanation: "Present Perfect for duration, Present Perfect for results, Be going to or Future Simple for plans."
            },
            {
                sentence: "During the meeting yesterday, while the manager (explain) the new policy, several employees (raise) questions about its impact.",
                blanks: ["was explaining", "raised"],
                explanation: "Past Continuous for background action, Past Simple for interrupting actions."
            },
            {
                sentence: "The population of urban areas (increase) dramatically over the last century, and this trend (likely/continue) as more people (move) to cities.",
                blanks: ["has increased", "is likely to continue/will likely continue", "move"],
                explanation: "Present Perfect for changes over time, Future Simple for predictions, Present Simple for general truths."
            },
            {
                sentence: "I (just/finish) reading a book about climate change, and it (make) me realize how urgently we (need) to act.",
                blanks: ["have just finished", "has made", "need"],
                explanation: "Present Perfect for recent actions, Present Perfect for present results, Present Simple for general truths."
            },
            {
                sentence: "At this moment, tourists (flock) to the beach because the weather (improve), but earlier it (rain) all morning.",
                blanks: ["are flocking", "is improving", "was raining"],
                explanation: "Present Continuous for current actions, Past Continuous for past ongoing actions."
            },
            {
                sentence: "When I was a child, my family (travel) to the countryside every summer, and we (spend) days exploring nature.",
                blanks: ["used to travel/traveled", "spent/would spend"],
                explanation: "Used to or Past Simple for past habits, Past Simple or Would for repeated past actions."
            },
            {
                sentence: "Experts say that by 2030, electric vehicles (dominate) the market, and fossil fuel cars (phase) out gradually.",
                blanks: ["will dominate", "will be phased"],
                explanation: "Future Simple for predictions, Future Passive for predictions about actions done to something."
            },
            {
                sentence: "She (not/see) her friends for months because she (prepare) for her exams, but she (meet) them after the test.",
                blanks: ["has not seen", "has been preparing", "is going to meet/will meet"],
                explanation: "Present Perfect for duration, Present Perfect Continuous for recent ongoing actions, Future for plans."
            },
            {
                sentence: "Yesterday evening, as I (cook) dinner, the power (go) out, and I (have) to use candles to finish.",
                blanks: ["was cooking", "went", "had"],
                explanation: "Past Continuous for background action, Past Simple for completed actions."
            },
            {
                sentence: "The economy (recover) slowly since the recession, and businesses (expect) growth to accelerate next year.",
                blanks: ["has recovered/has been recovering", "expect"],
                explanation: "Present Perfect for ongoing changes, Present Simple for general opinions."
            },
            {
                sentence: "I (believe) that technology (transform) healthcare in the future, making treatments more accessible for everyone.",
                blanks: ["believe", "will transform"],
                explanation: "Present Simple for opinions, Future Simple for predictions."
            },
            {
                sentence: "While the students (discuss) the project in class, the teacher (interrupt) with an important announcement about the deadline.",
                blanks: ["were discussing", "interrupted"],
                explanation: "Past Continuous for background action, Past Simple for interrupting actions."
            },
            {
                sentence: "Over the past decade, social media (influence) public opinion greatly, and it (continue) to shape how we communicate.",
                blanks: ["has influenced", "will continue"],
                explanation: "Present Perfect for changes over time, Future Simple for predictions."
            },
            {
                sentence: "He (promise) to help with the assignment, but now he (say) he (be) too busy because he (work) on his own tasks.",
                blanks: ["promised", "says/is saying", "is", "is working"],
                explanation: "Past Simple for completed actions, Present Simple or Continuous for current situations."
            },
            {
                sentence: "In the graph, it is clear that unemployment rates (fall) since 2018, and they (project) to decrease further by 2026.",
                blanks: ["have fallen", "are projected/will be projected"],
                explanation: "Present Perfect for changes over time, Present Passive for official projections."
            },
            {
                sentence: "Last year, when we (plan) our vacation, we (not/know) that flights (cancel) due to bad weather.",
                blanks: ["were planning", "did not know", "would be cancelled/were cancelled"],
                explanation: "Past Continuous for ongoing actions, Past Simple for states, Future in the Past or Past Simple for events that happened later."
            },
            {
                sentence: "Currently, many countries (invest) in green technology, and this (lead) to a reduction in carbon emissions over time.",
                blanks: ["are investing", "will lead"],
                explanation: "Present Continuous for current trends, Future Simple for predicted consequences."
            }
        ];
        
        // Initialize the page
        function init() {
            const container = document.getElementById('exercises-container');
            container.innerHTML = '';
            
            exercises.forEach((exercise, index) => {
                const exerciseDiv = document.createElement('div');
                exerciseDiv.className = 'exercise';
                exerciseDiv.id = `exercise-${index}`;
                
                // Process the sentence to create input fields with verb hints
                let sentenceHTML = '<div class="sentence">';
                let tempSentence = exercise.sentence;
                let blankIndex = 0;
                
                // Replace each parenthesized verb with an input field
                sentenceHTML += tempSentence.replace(/\(([^)]+)\)/g, (match, verb) => {
                    const inputId = `answer-${index}-${blankIndex}`;
                    blankIndex++;
                    return `<input type="text" class="answer-input" id="${inputId}" placeholder="${verb}">`;
                });
                
                sentenceHTML += '</div>';
                
                // Add explanation
                sentenceHTML += `<div class="explanation">${exercise.explanation}</div>`;
                
                // Add feedback div
                sentenceHTML += '<div class="feedback" id="feedback-' + index + '"></div>';
                
                // Add buttons
                sentenceHTML += `
                    <div class="buttons">
                        <button class="check-btn" onclick="checkAnswer(${index})">Check</button>
                        <button class="show-btn" onclick="showAnswer(${index})">Show Answer</button>
                        <button class="reset-btn" onclick="resetAnswer(${index})">Reset</button>
                    </div>
                `;
                
                exerciseDiv.innerHTML = sentenceHTML;
                container.appendChild(exerciseDiv);
            });
            
            // Update total score
            document.getElementById('total').textContent = exercises.length;
        }
        
        // Check a single answer
        function checkAnswer(exerciseIndex) {
            const exercise = exercises[exerciseIndex];
            let allCorrect = true;
            const feedbackDiv = document.getElementById(`feedback-${exerciseIndex}`);
            let feedbackHTML = '';
            
            for (let i = 0; i < exercise.blanks.length; i++) {
                const input = document.getElementById(`answer-${exerciseIndex}-${i}`);
                const userAnswer = input.value.trim().toLowerCase();
                const correctAnswers = exercise.blanks[i].toLowerCase().split('/');
                const isCorrect = correctAnswers.some(answer => userAnswer === answer);
                
                if (isCorrect) {
                    input.style.backgroundColor = '#d4edda';
                    input.style.borderColor = '#c3e6cb';
                } else {
                    input.style.backgroundColor = '#f8d7da';
                    input.style.borderColor = '#f5c6cb';
                    allCorrect = false;
                    feedbackHTML += `<div>Blank ${i+1}: Correct answer(s): ${exercise.blanks[i]}</div>`;
                }
            }
            
            if (allCorrect) {
                feedbackDiv.className = 'feedback correct';
                feedbackDiv.textContent = 'Correct! Well done.';
            } else {
                feedbackDiv.className = 'feedback incorrect';
                feedbackDiv.innerHTML = feedbackHTML;
            }
            
            feedbackDiv.style.display = 'block';
            updateScore();
        }
        
        // Show the correct answer for a single exercise
        function showAnswer(exerciseIndex) {
            const exercise = exercises[exerciseIndex];
            
            for (let i = 0; i < exercise.blanks.length; i++) {
                const input = document.getElementById(`answer-${exerciseIndex}-${i}`);
                input.value = exercise.blanks[i].split('/')[0]; // Show the first option if there are multiple
                input.style.backgroundColor = '#e2f0fb';
                input.style.borderColor = '#b3d9ff';
            }
            
            const feedbackDiv = document.getElementById(`feedback-${exerciseIndex}`);
            feedbackDiv.className = 'feedback';
            feedbackDiv.textContent = 'Answer shown.';
            feedbackDiv.style.display = 'block';
            
            updateScore();
        }
        
        // Reset a single exercise
        function resetAnswer(exerciseIndex) {
            const exercise = exercises[exerciseIndex];
            
            for (let i = 0; i < exercise.blanks.length; i++) {
                const input = document.getElementById(`answer-${exerciseIndex}-${i}`);
                input.value = '';
                input.style.backgroundColor = '';
                input.style.borderColor = '';
            }
            
            const feedbackDiv = document.getElementById(`feedback-${exerciseIndex}`);
            feedbackDiv.style.display = 'none';
            
            updateScore();
        }
        
        // Check all answers
        function checkAllAnswers() {
            for (let i = 0; i < exercises.length; i++) {
                checkAnswer(i);
            }
        }
        
        // Show all answers
        function showAllAnswers() {
            for (let i = 0; i < exercises.length; i++) {
                showAnswer(i);
            }
        }
        
        // Reset all answers
        function resetAllAnswers() {
            for (let i = 0; i < exercises.length; i++) {
                resetAnswer(i);
            }
        }
        
        // Update the score
        function updateScore() {
            let correctCount = 0;
            
            exercises.forEach((exercise, index) => {
                let allCorrect = true;
                
                for (let i = 0; i < exercise.blanks.length; i++) {
                    const input = document.getElementById(`answer-${index}-${i}`);
                    const userAnswer = input.value.trim().toLowerCase();
                    const correctAnswers = exercise.blanks[i].toLowerCase().split('/');
                    const isCorrect = correctAnswers.some(answer => userAnswer === answer);
                    
                    if (!isCorrect) {
                        allCorrect = false;
                        break;
                    }
                }
                
                if (allCorrect && input.value.trim() !== '') {
                    correctCount++;
                }
            });
            
            document.getElementById('score').textContent = correctCount;
        }
        
        // Initialize the page when loaded
        window.onload = init;
    </script>
</body>
</html>
